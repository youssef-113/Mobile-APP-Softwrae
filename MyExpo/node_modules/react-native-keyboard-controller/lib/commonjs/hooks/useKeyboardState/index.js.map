{"version":3,"names":["_react","require","_bindings","_module","EVENTS","getLatestState","KeyboardController","state","isVisible","useKeyboardState","setState","useState","useEffect","subscriptions","map","event","KeyboardEvents","addListener","forEach","subscription","remove","exports"],"sources":["index.ts"],"sourcesContent":["import { useEffect, useState } from \"react\";\n\nimport { KeyboardEvents } from \"../../bindings\";\nimport { KeyboardController } from \"../../module\";\n\nimport type { KeyboardState } from \"../../types\";\n\nconst EVENTS = [\"keyboardDidShow\", \"keyboardDidHide\"] as const;\n\nconst getLatestState = () => ({\n  ...KeyboardController.state(),\n  isVisible: KeyboardController.isVisible(),\n});\n\nexport const useKeyboardState = (): KeyboardState => {\n  const [state, setState] = useState(getLatestState);\n\n  useEffect(() => {\n    const subscriptions = EVENTS.map((event) =>\n      KeyboardEvents.addListener(event, () =>\n        // state will be updated by global listener first,\n        // so we simply read it and don't derive data from the event\n        setState(getLatestState),\n      ),\n    );\n\n    // we might have missed an update between reading a value in render and\n    // `addListener` in this handler, so we set it here. If there was\n    // no change, React will filter out this update as a no-op.\n    setState(getLatestState);\n\n    return () => {\n      subscriptions.forEach((subscription) => subscription.remove());\n    };\n  }, []);\n\n  return state;\n};\n"],"mappings":";;;;;;AAAA,IAAAA,MAAA,GAAAC,OAAA;AAEA,IAAAC,SAAA,GAAAD,OAAA;AACA,IAAAE,OAAA,GAAAF,OAAA;AAIA,MAAMG,MAAM,GAAG,CAAC,iBAAiB,EAAE,iBAAiB,CAAU;AAE9D,MAAMC,cAAc,GAAGA,CAAA,MAAO;EAC5B,GAAGC,0BAAkB,CAACC,KAAK,CAAC,CAAC;EAC7BC,SAAS,EAAEF,0BAAkB,CAACE,SAAS,CAAC;AAC1C,CAAC,CAAC;AAEK,MAAMC,gBAAgB,GAAGA,CAAA,KAAqB;EACnD,MAAM,CAACF,KAAK,EAAEG,QAAQ,CAAC,GAAG,IAAAC,eAAQ,EAACN,cAAc,CAAC;EAElD,IAAAO,gBAAS,EAAC,MAAM;IACd,MAAMC,aAAa,GAAGT,MAAM,CAACU,GAAG,CAAEC,KAAK,IACrCC,wBAAc,CAACC,WAAW,CAACF,KAAK,EAAE;IAChC;IACA;IACAL,QAAQ,CAACL,cAAc,CACzB,CACF,CAAC;;IAED;IACA;IACA;IACAK,QAAQ,CAACL,cAAc,CAAC;IAExB,OAAO,MAAM;MACXQ,aAAa,CAACK,OAAO,CAAEC,YAAY,IAAKA,YAAY,CAACC,MAAM,CAAC,CAAC,CAAC;IAChE,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;EAEN,OAAOb,KAAK;AACd,CAAC;AAACc,OAAA,CAAAZ,gBAAA,GAAAA,gBAAA","ignoreList":[]}